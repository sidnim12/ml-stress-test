<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>{{ code }} Â· {{ title }}</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
  <div class="container">

    <!-- TOPBAR -->
    <div class="topbar">
      <div class="brand">
        <div class="badge">RT</div>
        <div>
          <h1>{{ title }}</h1>
          <p>Error {{ code }} Â· ML Robustness Stress Tester</p>
        </div>
      </div>

      <button id="themeToggle" class="theme-btn" type="button" aria-label="Toggle theme">
        ðŸŒ™
      </button>
    </div>

    <!-- ERROR CARD -->
    <div class="card">
      <div class="card-inner">
        <div class="error-wrap">

          <div class="error-code">{{ code }}</div>

          <p class="h2" style="margin-top:10px;">
            {{ message }}
          </p>

          {% if hint %}
            <p class="sub">{{ hint }}</p>
          {% endif %}

          {% if path %}
            <div class="note">
              Path: <span class="mono">{{ path }}</span>
            </div>
          {% endif %}

          {% if details %}
            <div class="hr"></div>
            <p class="note"><strong>Debug details (only in debug mode):</strong></p>
            <pre class="error-details" style="max-height:300px; overflow:auto;">
{{ details }}
            </pre>
          {% endif %}

          <div class="hr"></div>

          <div class="error-actions">
            <a class="btn btn-primary-home" href="{{ url_for('index') }}">
              Return Home
            </a>
          </div>

        </div>
      </div>
    </div>

    <!-- FOOTER -->
    <div class="footer">
      <div>Robustness-first UI Â· Structured error handling</div>
      <div>Tip: verify dataset format & target column</div>
    </div>

  </div>

  <!-- Theme Toggle Script -->
  <script>
    (function () {
      const html = document.documentElement;
      const btn = document.getElementById("themeToggle");

      function applyTheme(theme) {
        html.setAttribute("data-theme", theme);
        btn.textContent = theme === "dark" ? "â˜€ï¸" : "ðŸŒ™";
        btn.setAttribute("aria-label", theme === "dark" ? "Switch to light theme" : "Switch to dark theme");
      }

      const saved = localStorage.getItem("theme");
      const prefersDark =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      applyTheme(saved || (prefersDark ? "dark" : "light"));

      btn.addEventListener("click", () => {
        const current = html.getAttribute("data-theme") || "light";
        const next = current === "dark" ? "light" : "dark";
        localStorage.setItem("theme", next);
        applyTheme(next);
      });
    })();
  </script>

</body>
</html>